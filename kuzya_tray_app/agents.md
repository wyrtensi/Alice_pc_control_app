# Домовёнок Кузя → Kuzya Tray App (HTTP)

Этот файл — готовый набор **HTTP-команд** для привязки к действиям в Домовёнке Кузе (станция с Алисой), чтобы управлять вашим ПК через приложение **Kuzya Tray App**.

> Порт сервера: **45583**  
> IP ПК (LAN): **192.168.0.103**  
> Внешний IP (WAN): **46.48.26.83**  
> Аутентификация: **без токена** (по вашему запросу)

---

## Быстрый старт

В Кузе создавайте действия **HTTP GET** и указывайте нужный URL.  
Работают как внутри сети (LAN), так и снаружи (WAN) — при условии проброса порта 45583 и правила в брандмауэре Windows.

| Действие | Метод | URL (LAN) | URL (WAN) | Ответ (пример) |
|---|---|---|---|---|
| Состояние ПК | GET | `http://192.168.0.103:45583/state` | `http://46.48.26.83:45583/state` | `{"ok":true,"value":1}` |
| Toggle Play/Pause | GET | `http://192.168.0.103:45583/toggle` | `http://46.48.26.83:45583/toggle` | `{"ok":true,"action":"toggle"}` |
| Выключить ПК | GET | `http://192.168.0.103:45583/shutdown` | `http://46.48.26.83:45583/shutdown` | `{"ok":true,"action":"shutdown"}` |
| Узнать громкость | GET | `http://192.168.0.103:45583/get_volume` | `http://46.48.26.83:45583/get_volume` | `{"ok":true,"value":54}` |
| Задать громкость (0–100) | GET | `http://192.168.0.103:45583/set_volume?value=51` | `http://46.48.26.83:45583/set_volume?value=51` | `{"ok":true,"value":51}` |
| Прибавить громкость (шаг) | GET | `http://192.168.0.103:45583/volume_up?step=5` | `http://46.48.26.83:45583/volume_up?step=5` | `{"ok":true,"action":"volume_up","value":56}` |
| Убавить громкость (шаг) | GET | `http://192.168.0.103:45583/volume_down?step=5` | `http://46.48.26.83:45583/volume_down?step=5` | `{"ok":true,"action":"volume_down","value":51}` |
| Узнать mute | GET | `http://192.168.0.103:45583/get_mute` | `http://46.48.26.83:45583/get_mute` | `{"ok":true,"value":0}` |
| Включить mute | GET | `http://192.168.0.103:45583/mute` | `http://46.48.26.83:45583/mute` | `{"ok":true,"value":1}` |
| Выключить mute | GET | `http://192.168.0.103:45583/unmute` | `http://46.48.26.83:45583/unmute` | `{"ok":true,"value":0}` |
| Переключить mute | GET | `http://192.168.0.103:45583/toggle_mute` | `http://46.48.26.83:45583/toggle_mute` | `{"ok":true,"value":0|1}` |

> Примечание: эндпоинт **`/set_volume`** принимает и `value=%7B51%7D` (то есть `{51}`), и чистое число: `51`.

---

## Рекомендации по фразам для Алисы (идеи команд)

- «Кузя, **пауза**» → `/toggle`  
- «Кузя, **продолжить**» → `/toggle`  
- «Кузя, **сделай громкость 40**» → `/set_volume?value=40`  
- «Кузя, **прибавь громкость на 10**» → `/volume_up?step=10`  
- «Кузя, **сделай тише на 5**» → `/volume_down?step=5`  
- «Кузя, **выключи звук**» → `/mute`  
- «Кузя, **включи звук**» → `/unmute`  
- «Кузя, **переключи звук**» → `/toggle_mute`  
- «Кузя, **выключи компьютер**» → `/shutdown`

---

## Безопасность

Если вы откроете доступ снаружи (через WAN), **настоятельно** рекомендуем ограничить доступ (белый список IP, токен-параметр `?token=...`, VPN, прокси с авторизацией) — иначе любой, кто знает адрес и порт, сможет управлять вашим ПК.
